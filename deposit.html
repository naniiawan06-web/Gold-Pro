<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gold Pro - Deposit</title>

<style>
body{
  margin:0;
  font-family:'Segoe UI',Tahoma,Verdana,sans-serif;
  background:linear-gradient(to right,#ffecd2,#fcb69f);
}
.top-bar{
  display:flex;
  justify-content:flex-end;
  padding:12px 20px;
  background:#f78f1e;
}
.top-bar button{
  background:#fff;
  color:#f78f1e;
  border:none;
  padding:8px 12px;
  border-radius:8px;
  font-weight:bold;
}
.container{
  max-width:450px;
  margin:20px auto 90px auto;
  background:#fff;
  padding:25px;
  border-radius:15px;
  box-shadow:0 10px 30px rgba(0,0,0,0.15);
}
h2{text-align:center;color:#f78f1e;}
.info{
  background:#fff3cd;
  color:#856404;
  padding:10px;
  border-radius:10px;
  text-align:center;
  font-weight:bold;
  margin-bottom:15px;
}
input,select{
  width:100%;
  padding:12px;
  margin:8px 0;
  border-radius:10px;
  border:1px solid #ccc;
}
button{
  width:100%;
  padding:14px;
  margin-top:10px;
  background:#f78f1e;
  color:#fff;
  border:none;
  border-radius:12px;
  font-size:16px;
  font-weight:bold;
}
#message{
  margin-top:15px;
  padding:12px;
  border-radius:10px;
  display:none;
  text-align:center;
  font-weight:bold;
}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:15px;
  font-size:14px;
}
th,td{
  border:1px solid #ccc;
  padding:8px;
  text-align:center;
}
th{background:#f78f1e;color:#fff;}
.pending{color:#856404;}
.approved{color:#256029;}
.bottom-nav{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  background:#fff;
  display:flex;
  justify-content:space-around;
  padding:10px 0;
  box-shadow:0 -3px 10px rgba(0,0,0,0.1);
}
.bottom-nav a{
  text-decoration:none;
  color:#f78f1e;
  font-weight:bold;
  font-size:14px;
}
</style>
</head>

<body>

<div class="top-bar">
  <button>Customer Support: 03105403991</button>
</div>

<div class="container">
  <h2>Deposit Funds</h2>

  <div class="info">
    Wallet Type: Easypaisa 
    Account Number: 03185281054
    Minimum Deposit: 500
    Deposit approved in 5 seconds
  </div>

  <form id="depositForm">
    <select required>
      <option value="">-- Select Wallet --</option>
      <option>EasyPaisa</option>
      <option>JazzCash</option>
    </select>

    <input type="text" id="holder" placeholder="Account Holder Name" required>
    <input type="text" id="account" placeholder="Account Number" required>
    <input type="text" id="trx" placeholder="Transaction / TRX ID" required>
    <input type="number" id="amount" placeholder="Enter Amount" min="100" required>
    <input type="file" required>

    <button type="submit">Submit Deposit</button>
  </form>

  <div id="message"></div>

  <h3 style="color:#f78f1e;margin-top:20px;">
    Balance: PKR <span id="balance">0</span>
  </h3>

  <h3 style="color:#f78f1e;">Deposit History</h3>

  <table>
    <thead>
      <tr>
        <th>Date</th>
        <th>Time</th>
        <th>Account</th>
        <th>TRX ID</th>
        <th>Amount</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody id="history"></tbody>
  </table>
</div>

<div class="bottom-nav">
  <a href="home.html">Home</a>
  <a href="buyplan.html">Buy Plan</a>
  <a href="myplan.html">My Plan</a>
  <a href="invite.html">Invite</a>
  <a href="me.html">Me</a>
</div>

<script>
let balance = parseFloat(localStorage.getItem("balance")) || 0;
let userBalance = parseFloat(localStorage.getItem("userBalance")) || 0;
let deposits = JSON.parse(localStorage.getItem("deposits")) || [];

document.getElementById("balance").innerText = balance;

function render(){
  const h = document.getElementById("history");
  h.innerHTML = "";
  deposits.forEach(d=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${d.date}</td>
      <td>${d.time}</td>
      <td>${d.account}</td>
      <td>${d.trx}</td>
      <td>${d.amount}</td>
      <td class="${d.status === 'Pending' ? 'pending' : 'approved'}">${d.status}</td>
    `;
    h.appendChild(tr);
  });
}

function checkApprovals(){
  const now = Date.now();
  let changed = false;

  deposits.forEach(d=>{
    if(d.status === "Pending" && now - d.timestamp >= 5000){
      d.status = "Approved";
      balance += d.amount;
      userBalance += d.amount;
      changed = true;
    }
  });

  if(changed){
    localStorage.setItem("balance", balance);
    localStorage.setItem("userBalance", userBalance);
    localStorage.setItem("deposits", JSON.stringify(deposits));
    document.getElementById("balance").innerText = balance;
    render();
  }
}

setInterval(checkApprovals, 1000);
render();

depositForm.onsubmit = e => {
  e.preventDefault();

  const now = new Date();
  deposits.push({
    account: account.value,
    trx: trx.value,
    amount: parseFloat(amount.value),
    status: "Pending",
    timestamp:Date.now(),
    date: now.toLocaleDateString(),
    time: now.toLocaleTimeString()
  });

  localStorage.setItem("deposits", JSON.stringify(deposits));
  render();

  message.style.display = "block";
  message.style.background = "#fff3cd";
  message.innerText = "Deposit submitted. Auto approving in 5 seconds...";

  depositForm.reset();
};
</script>

</body>
  </html>
