<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gold Pro - Deposit</title>
<style>
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin:0; background: linear-gradient(to right,#ffecd2,#fcb69f);
}
/* Top Bar */
.top-bar{
  display:flex; justify-content:flex-end; align-items:center;
  padding:12px 20px; background:#f78f1e; color:#fff;
}
.top-bar button{
  background:#fff; color:#f78f1e; border:none; padding:8px 12px;
  border-radius:8px; font-weight:bold; cursor:pointer; transition:0.3s;
}
.top-bar button:hover{background:#ffe0b2;}
/* Container */
.container{
  max-width:450px; margin:20px auto; background:#fff; border-radius:15px;
  box-shadow:0 10px 30px rgba(0,0,0,0.15); padding:25px 20px;
}
.container h2{text-align:center; color:#f78f1e;}
.info{
  text-align:center; background:#fff3cd; color:#856404; padding:10px; border-radius:10px;
  margin-bottom:15px; font-weight:bold;
}
form input, form select{
  width:100%; padding:12px 15px; margin:10px 0; border-radius:10px; border:1px solid #ccc; font-size:16px;
}
form button{
  width:100%; padding:15px; margin-top:15px; border:none; border-radius:12px;
  background:#f78f1e; color:#fff; font-size:18px; font-weight:bold; cursor:pointer; transition:0.3s;
}
form button:hover{background:#e57700;}
#message{
  margin-top:15px; padding:12px; border-radius:10px; background:#c8e6c9;
  color:#256029; font-weight:bold; display:none; text-align:center;
}
/* Deposit History Table */
#history{
  margin-top:20px; width:100%; border-collapse:collapse;
}
#history th, #history td{
  border:1px solid #ccc; padding:8px; text-align:center;
}
#history th{
  background:#f78f1e; color:#fff;
  border-radius:6px;
}
.pending{color:#856404;}
.approved{color:#256029;}
/* Bottom Navigation */
.bottom-nav{
  position:fixed; bottom:0; left:0; width:100%; background:#fff;
  box-shadow:0 -3px 10px rgba(0,0,0,0.1); display:flex; justify-content:space-around; padding:10px 0;
}
.bottom-nav a{text-decoration:none; color:#f78f1e; font-weight:bold; text-align:center; font-size:14px;}
.bottom-nav a:hover{color:#e57700;}
</style>
</head>
<body>

<div class="top-bar">
  <button>Customer Support: 03105403991</button>
</div>

<div class="container">
  <h2>Deposit Funds</h2>

  <div class="info">
    Minimum Deposit: PKR 500 | Deposit will be auto approved within <strong>2 minutes</strong><br>
    Send money to EasyPaisa Number: <strong>03185281054</strong>
  </div>

  <form id="deposit-form">
    <label>Select Wallet <span style="color:red">*</span></label>
    <select name="wallet" required>
      <option value="">-- Select Wallet --</option>
      <option value="EasyPaisa">EasyPaisa</option>
      <option value="JazzCash">JazzCash</option>
    </select>

    <label>Your Account Name <span style="color:red">*</span></label>
    <input type="text" placeholder="Enter Your Account Name" name="account_name" required>

    <label>Your Account Number <span style="color:red">*</span></label>
    <input type="text" placeholder="Enter Your Account Number" name="account_number" required>

    <label>Amount to Deposit <span style="color:red">*</span></label>
    <input type="number" placeholder="Enter Amount" name="amount" required min="500" max="50000">

    <label>Upload Screenshot <span style="color:red">*</span></label>
    <input type="file" name="screenshot" required>

    <button type="submit">Submit Deposit</button>
  </form>

  <div id="message"></div>

  <h3 style="margin-top:25px; color:#f78f1e;">Deposit History</h3>
  <table id="history">
    <thead>
      <tr>
        <th>Date</th>
        <th>Time</th>
        <th>Wallet</th>
        <th>Amount</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>

  <h3 style="margin-top:15px; color:#f78f1e;">Current Balance: PKR <span id="balance">0</span></h3>
</div>

<div class="bottom-nav">
  <a href="home.html">Home</a>
  <a href="buyplan.html">Buy Plan</a>
  <a href="myplan.html">My Plan</a>
  <a href="invite.html">Invite</a>
  <a href="me.html">Me</a>
</div>

<script>
// Load balance and history from localStorage
let userBalance = parseFloat(localStorage.getItem('userBalance')) || 0;
let depositHistory = JSON.parse(localStorage.getItem('depositHistory')) || [];
document.getElementById('balance').innerText = userBalance;

// Function to update history table
function renderHistory() {
  const tbody = document.querySelector("#history tbody");
  tbody.innerHTML = '';
  depositHistory.forEach(dep => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${dep.date}</td>
      <td>${dep.time}</td>
      <td>${dep.wallet}</td>
      <td>PKR ${dep.amount}</td>
      <td class="${dep.status === 'Pending' ? 'pending':'approved'}">${dep.status}</td>
    `;
    tbody.appendChild(tr);
  });
}

// Initial render
renderHistory();

document.getElementById('deposit-form').addEventListener('submit', function(e){
  e.preventDefault();
  const wallet = this.wallet.value;
  const name = this.account_name.value;
  const number = this.account_number.value;
  const amount = parseFloat(this.amount.value);

  if(!wallet || !name || !number || !amount){
    alert("Please fill all required fields.");
    return;
  }
  if(amount < 500 || amount > 50000){
    alert("Deposit amount must be between PKR 500 and PKR 50,000.");
    return;
  }

  // Get current date/time
  const now = new Date();
  const date = now.toLocaleDateString();
  const time = now.toLocaleTimeString();

  // Add to history as Pending
  const depositEntry = {date,time,wallet,amount,status:'Pending'};
  depositHistory.push(depositEntry);
  localStorage.setItem('depositHistory', JSON.stringify(depositHistory));
  renderHistory();

  // Show message
  const msg = document.getElementById('message');
  msg.style.display = "block";
  msg.style.background = "#fff3cd";
  msg.style.color = "#856404";
  msg.innerText = `Deposit of PKR ${amount} submitted via ${wallet}.\nAuto approving in 2 minutes...`;

  this.reset();

  // Auto approve after 2 minutes
  setTimeout(()=>{
    userBalance += amount;
    localStorage.setItem('userBalance', userBalance);
    document.getElementById('balance').innerText = userBalance;

    // Update status in history
    depositEntry.status = 'Approved';
    localStorage.setItem('depositHistory', JSON.stringify(depositHistory));
    renderHistory();

    msg.style.background = "#c8e6c9";
    msg.style.color = "#256029";
    msg.innerText = `Deposit Approved âœ…\nAmount: PKR ${amount}\nNew Balance: PKR ${userBalance}`;
  }, 120000); // 2 minutes
});
</script>

</body>
  </html>
